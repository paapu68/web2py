(dp1
S'output'
p2
S'<type \'exceptions.SyntaxError\'> define_table argument is not a Field or Table: auth_user.id,auth_user.first_name,auth_user.last_name,auth_user.email,auth_user.username,auth_user.password,auth_user.registration_key,auth_user.reset_password_key,auth_user.registration_id,opettaja.id,opettaja.user_id,kurssi.id,kurssi.title,kurssi.opettaja_id\r\n2,outi,Oppilas,outi.oppilas@gmail.com,outi,"pbkdf2(1000,20,sha512)$ae81bbfdc970f851$e2a70f18114ebd7f6f615a9567bcfbdabe7c797d",,,,2,4,6,FY1,2\r\n3,Ossi,Opettaja,ossi.opettaja@gmail.com,ossi,"pbkdf2(1000,20,sha512)$ad10e6fe2e589055$397cde61b8d9a13b49e5098170f9d193381c1419",,,,3,3,7,KE1,3\r\n'
p3
sS'layer'
p4
S'/home/mka/web2py/applications/kurssihallinta/controllers/opettaja.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n#reload modules\nfrom gluon.custom_import import track_changes; track_changes(True)\nimport opettaja  #tietokantahaut ../modules/opettaja.py\n#import opettajan_haut #../models/opettajan_haut.py\n\n@auth.requires_membership(\'opettaja\')\ndef kaikki_kurssit():\n    """\n    Opettajan kaikki kurssit\n    """\n    import sys\n\n    opettajan_kurssit = opettaja.hae_opettajan_kaikki_kurssit(db)\n    oppilaita_kurssilla = []\n    #tehd\xc3\xa4\xc3\xa4n fake-database k\xc3\xa4ytt\xc3\xa4en haettujen kurssien nimi\xc3\xa4\n    #jotta saadaan ne alasvetovalikkoon\n    db.define_table(\'valitsekurssi\',\n                    Field(\'kurssin_nimi\'),\n                    format = \'%(kurssin_nimi)s\'\n                    )\n    for rivi in opettajan_kurssit:\n        db.valitsekurssi.insert(kurssin_nimi=rivi.kurssi.title)\n        kurssi = rivi.kurssi\n        query = (rivi.kurssi.id == db.oppilaatKursseilla.kurssi_id)\n        oppilaita_kurssilla.append(db(query).count())\n\n    #form = SQLFORM.factory(\n    #    Field(\'kurssin_nimi\', requires=IS_IN_DB(db, \n    #                                    db.valitsekurssi.id,\n    #                                    \'%(kurssin_nimi)s\', zero=None)))\n    form = SQLFORM.factory(opettajan_kurssit)\n\n    response.view = \'opettaja/opettaja_kaikki_kurssit.html\'\n\n    if form.process().accepted:\n        print "HYV\xc3\x84KSYTTY", \n        kurssi_id = form.vars.kurssin_nimi\n        #pit\xc3\xa4\xc3\xa4 pudottaa fake-tietokantataulu pois \n        # jottei se kasva kokoajan\n        db.valitsekurssi.drop()\n        redirect(URL(\'yksi_kurssi\',vars=dict(kurssi_id=kurssi_id)))\n\n\n    return dict(opettajan_kurssit=opettajan_kurssit,\n                oppilaita_kurssilla=oppilaita_kurssilla,\n                form=form)\n\n#@auth.requires_membership(\'opettaja\')\ndef yksi_kurssi():\n    """\n    Opettajan yksi kurssi\n    """\n    opettajan_kurssin_kurssityot = \\\n        opettaja.hae_kurssin_kurssityot(request.vars.kurssi_id, db)\n    print "kurssiID", request.vars.kurssi_id\n    print "opettajan_kurssin_kurssityot", opettajan_kurssin_kurssityot\n    oppilaita_kurssilla = 1\n    response.view = \'opettaja/opettaja_yksi_kurssi.html\'\n\n    return dict(opettajan_kurssin_kurssityot=opettajan_kurssin_kurssityot)\n\nresponse._vars=response._caller(kaikki_kurssit)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/mka/web2py/gluon/restricted.py", line 220, in restricted\n    exec ccode in environment\n  File "/home/mka/web2py/applications/kurssihallinta/controllers/opettaja.py", line 63, in <module>\n  File "/home/mka/web2py/gluon/globals.py", line 385, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/mka/web2py/gluon/tools.py", line 3287, in f\n    return action(*a, **b)\n  File "/home/mka/web2py/applications/kurssihallinta/controllers/opettaja.py", line 32, in kaikki_kurssit\n    form = SQLFORM.factory(opettajan_kurssit)\n  File "/home/mka/web2py/gluon/sqlhtml.py", line 1651, in factory\n    return SQLFORM(DAL(None).define_table(table_name, *fields),\n  File "/home/mka/web2py/gluon/dal.py", line 8223, in define_table\n    table = self.lazy_define_table(tablename,*fields,**args)\n  File "/home/mka/web2py/gluon/dal.py", line 8240, in lazy_define_table\n    table = table_class(self, tablename, *fields, **args)\n  File "/home/mka/web2py/gluon/dal.py", line 8725, in __init__\n    \'define_table argument is not a Field or Table: %s\' % field)\nSyntaxError: define_table argument is not a Field or Table: auth_user.id,auth_user.first_name,auth_user.last_name,auth_user.email,auth_user.username,auth_user.password,auth_user.registration_key,auth_user.reset_password_key,auth_user.registration_id,opettaja.id,opettaja.user_id,kurssi.id,kurssi.title,kurssi.opettaja_id\r\n2,outi,Oppilas,outi.oppilas@gmail.com,outi,"pbkdf2(1000,20,sha512)$ae81bbfdc970f851$e2a70f18114ebd7f6f615a9567bcfbdabe7c797d",,,,2,4,6,FY1,2\r\n3,Ossi,Opettaja,ossi.opettaja@gmail.com,ossi,"pbkdf2(1000,20,sha512)$ad10e6fe2e589055$397cde61b8d9a13b49e5098170f9d193381c1419",,,,3,3,7,KE1,3\r\n\n'
p11
s.